import { test, expect } from '@playwright/test';
import * as Cesium from 'cesium';

// הגדרת קואורדינטות אורך ורוחב
const longitude = 36.5;
const latitude = 33;
  
test('Click on a location based on coordinates2', async ({ page }) => {

    await page.goto('https://sandcastle.cesium.com/standalone.html#c=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');

    await page.waitForTimeout(50000);

    const pixelPosition = await page.evaluate(({ longitude, latitude }) => {  
        
        const cartesian = Cesium.Cartesian3.fromDegrees(longitude, latitude);
        const viewer = window.viewer;
        if (!viewer) {
            console.error("Viewer is not initialized.");
            return;
        }  
        const scene = viewer.scene;
        const windowPosition = scene.cartesianToCanvasCoordinates(cartesian);
        // console.log("Calculated Pixel Position:", windowPosition);

        return {
            x: windowPosition.x,
            y: windowPosition.y,
        };
    }, { longitude, latitude });


    console.log('Pixel Position:', pixelPosition);
    // לחיצה על הפיקסל במפה
    const mapCanvas = await page.locator('canvas');
    await mapCanvas.click({ position: { x: pixelPosition.x, y: pixelPosition.y } });

});

test('ZOOM', async ({ page }) => {

    await page.goto('https://sandcastle.cesium.com/standalone.html#c=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');

    await page.waitForTimeout(50000);

    await page.evaluate(() => {  
        
        const viewer = window.viewer;
        if (!viewer) {
            console.error("Viewer is not initialized.");
            return;
        }
        const scene = viewer.scene;
        const camera = scene.camera;
    
        // הגדרת גובה המצלמה לזום
        const zoomHeight = 1000; // לדוגמה: גובה 1000 מטר
        camera.setView({
            destination: Cesium.Cartesian3.fromDegrees(36.5, 33, zoomHeight)
        });
        

    });

    await page.waitForTimeout(10000);

});

test('DRAG', async ({ page }) => {

    await page.goto('https://sandcastle.cesium.com/standalone.html#c=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');

    await page.waitForTimeout(20000);

    const source = page.locator('canvas'); // האלמנט שגוררים
const target = page.locator('canvas'); // יעד הגרירה
await source.dragTo(target, {
    sourcePosition: { x: 910, y: 108 }, // מיקום בתוך האלמנט
    targetPosition: { x: 710, y: 198 }, // יעד בתוך האלמנט
});
    await page.waitForTimeout(10000);

});

test('Get ID', async ({ page }) => {

    await page.goto('https://sandcastle.cesium.com/standalone.html#c=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');

    await page.waitForTimeout(10000);

     // לחיצה על הפיקסל במפה
     const mapCanvas = await page.locator('canvas');
     await mapCanvas.click({ position: { x: 910, y: 108 } });
     await page.waitForTimeout(500);
     

    await page.evaluate(() => {  
        
        const viewer = window.viewer;
        // גישה לערכים הציבוריים של הישויות
    const entities = viewer.entities._entities;
    console.log("Entities:", entities);

    // לדוגמה: החזרת מידע על כל הישויות
    return entities.map(entity => ({
        id: entity.id,
        name: entity.name,
        position: entity.position
    }));
        
    });
    console.log("Entities Data:", entityData);
});
